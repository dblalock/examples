# This YAML is intended to serve as a reference for running on the Mosaic Cloud
# The config from `yamls/main/mosaic-bert-base-uncased.yaml` is copied into the `parameters` field below.
# You can copy/modify the contents of this file to run different workloads, following the other
# examples in this directory.
#
# Note that some of the fields in this template haven't been filled in yet.
# Please resolve any `null` fields before launching!
#
# When ready, use `mcli run -f yamls/main/mcloud_run_a100_80gb.yaml` to launch

run_name: mosaic-bert-base-uncased
cluster: r1z1      # Name of the cluster to use for this run
gpu_type: a100_80gb # Type of GPU to use (we use a100_80gb in our experiments)
gpu_num: 8  # Number of GPUs to use
image: mosaicml/pytorch:1.13.1_cu117-python3.10-ubuntu20.04
integrations:
- integration_type: git_repo
  git_repo: dblalock/examples
  git_branch: dev # use your branch
  # git_commit: # OR use your commit hash
  pip_install: -e .[bert]
command: |
  cd examples/examples/bert
  composer main.py yamls/main/mosaic-bert-base-uncased.yaml
